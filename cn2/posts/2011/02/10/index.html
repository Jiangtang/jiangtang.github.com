<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="jiang">
<meta name="dcterms.date" content="2011-02-10">

<title>丽·江行 - 关于OPV和IPV：脊髓灰质炎（小儿麻痹症）疫苗</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../">
<script src="../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../../index.html">
    <span class="navbar-title">丽·江行</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Jiangtang" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/JiangtangHu" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">关于OPV和IPV：脊髓灰质炎（小儿麻痹症）疫苗</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">家有虎娃</div>
                <div class="quarto-category">社会</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>jiang </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 10, 2011</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>/*<strong>*</strong>*****</p>
<p>关键词：</p>
<p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 小儿麻痹症</strong></p>
<p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 脊髓灰质炎</strong></p>
<p><strong>口服脊髓灰质炎疫苗(OPV)</strong>&nbsp;</p>
<p><strong>灭活脊髓灰质炎疫苗（IPV）</strong></p>
<p><strong>北京IPV接种点</strong></p>
<p>*<strong>*</strong>*<strong>*</strong>*<strong>*</strong>/</p>
<p>上午带虎头去中日友好医院打疫苗，IPV，预防小儿麻痹症的。虎头的建档医院是海淀妇幼保健院，本来是要在那里服用免费的OPV（也叫“糖丸”），但最后还是决定去朝阳给他打IPV。现在网上能看到某些婴儿因为服用糖丸而导致瘫痪的消息，很多年轻父母都很关心这个话题。刚好我对这个项目有过研究，做个笔记，感兴趣的朋友可以看看。内容都是基于公开出版物（列在文末），来自世界卫生组织(WHO)、学术杂志以及Wikipedia。我不是学医的，所以不用担心下面的内容会充满你看不懂的医学术语。另外，免责声明，这篇笔记的内容，只是我个人的一些记录，并不代表本人所供职的公司的意见。</p>
<p>先指出几个事实：</p>
<blockquote class="blockquote">
<p>美国2000年停止使用OPV；<br>
英国2004年停止使用OPV；<br>
在国内，OPV是免费的，属于国家免疫计划中的一类疫苗；<br>
现在北京的防疫系统，只能在朝阳的十来家医院或防疫站打IPV，一针198块钱，一共要打3针。一些涉外医院也提供，价钱更贵就是。</p>
</blockquote>
<p>&nbsp;</p>
<section id="一种病毒脊髓灰质炎小儿麻痹症" class="level2">
<h2 class="anchored" data-anchor-id="一种病毒脊髓灰质炎小儿麻痹症">1.一种病毒：脊髓灰质炎（小儿麻痹症）</h2>
<p>&nbsp;</p>
<p>一种病毒，叫做脊髓灰质炎病毒（Poliovirus，简称polio），也就是我们通常说的小儿麻痹症病毒，多在5岁以下的人群中发生。小孩如果染了这种病毒，200个中就有一位会产生永久性的瘫痪（这其中又有5%到10%的人会死亡）。现在小儿麻痹症最严重的四个国家是阿富汗、印度、尼日利亚和巴基斯坦。</p>
</section>
<section id="两种疫苗" class="level2">
<h2 class="anchored" data-anchor-id="两种疫苗">2.两种疫苗</h2>
<p>&nbsp;</p>
<p>小儿麻痹症不能医治，只能通过疫苗来预防。有两种疫苗，OPV和IPV，对全世界范围内控制polio起到了关键作用，它们都是20世纪五六十年代在美国开始研发的。</p>
<p>OPV全称是Oral polio vaccine（口服脊髓灰质炎疫苗），就是俗称的“糖丸”，口服的；</p>
<p>IPV全称是Inactivated polio vaccine（灭活脊髓灰质炎疫苗），要打针。</p>
</section>
<section id="你能看得懂的免疫基本原理" class="level2">
<h2 class="anchored" data-anchor-id="你能看得懂的免疫基本原理">3.你能看得懂的免疫基本原理</h2>
<p>&nbsp;</p>
<p>打疫苗的基本道理，就是主动给你体内注入某种坏东西，从而让你体内产生抗体。等外界的坏东西真的来了，体内的抗体就可以起到保护作用。我们小时候都种过牛痘，预防天花用的。在古代，种的不是牛痘，而是人痘。比如，一个人得过天花，身上会结痘痂（食痂之癖的“痂”），这个“痘（痂）”就有某些免疫功能。从天花患者身上取出这些痘痂，磨成粉，吹入健康人的鼻孔，这样这个健康人就可能产生预防天花的抗体。</p>
<p>植入的那个坏东西（痘或者其他）很关键，分两种：一种是<strong>减</strong>活的，就是还有些毒性，但是毒性很小；另一种是<strong>灭</strong>活的，就是死的，没有毒性。你能猜到，减活的疫苗，对人体的刺激大些；灭活的疫苗，对人体刺激小些。</p>
</section>
<section id="opv和ipv" class="level2">
<h2 class="anchored" data-anchor-id="opv和ipv">4.OPV和IPV</h2>
<p>&nbsp;</p>
<p>回到OPV和IPV。</p>
<p>OPV是减活疫苗，IPV是灭活疫苗。</p>
<p>OPV便宜，IPV贵些。</p>
<p>OPV口服，方便；IPV打针，对护士要求高些。</p>
<p>在临床试验上，OPV和IPV的效果都很好。前面提到，美国于2000年、英国于2004年停止使用OPV，但OPV现在仍然是世界上（包括中国）使用最广泛的预防小儿麻痹症的疫苗。</p>
</section>
<section id="opv的潜在风险" class="level2">
<h2 class="anchored" data-anchor-id="opv的潜在风险">5.OPV的潜在风险</h2>
<p>&nbsp;</p>
<p>对OPV的一些担忧，来自一个叫vaccine-derived poliovirus (VDPV，脊髓灰质炎疫苗衍生病毒) 的东西。OPV含有的那些减活的病毒，可能产生变异，从而产生一种新的病毒。简单些说，就是你服用OPV是为了预防小儿麻痹症的，但是服用OPV还有可能就让你患上小儿麻痹症！</p>
<p>听着很可怕吧？其实不用特别担心，这种现象不是很常见（大概是百万分之一）。对广大发展中国家来说，服用OPV带来的好处远远超过它带来的这个坏处。世卫组织的建议是，发展中国家可以继续使用OPV，中等发达国家尽量从OPV转到IPV，发达国家继续使用IPV，最终目的是全球范围内停止使用OPV（有规划是2013年）。</p>
<p>IPV没有VDPV的案例报道。</p>
</section>
<section id="来自中国的报道" class="level2">
<h2 class="anchored" data-anchor-id="来自中国的报道">6.来自中国的报道</h2>
<p>&nbsp;</p>
<p>根据一份来自中国卫生部2006年的文档（见下），中国2004年在贵州省爆发过VDPV(由于服用OPV而导致小孩致残事件)。</p>
<p>如果你google/baidu “<strong>糖丸事件</strong>”，可以看到一系列的讨论。从概率角度来说，OPV的确是安全的（前面说过，大概是百万分之一的风险，跟中彩票似的。但你可能会说中国儿童的基数那么大）。让广大父母担心的是国内疫苗事件的处理方式。</p>
</section>
<section id="如何在北京给孩子打ipv" class="level2">
<h2 class="anchored" data-anchor-id="如何在北京给孩子打ipv">7.如何在北京给孩子打IPV</h2>
<p>&nbsp;</p>
<p>到我写这篇文章为止，北京不是所有的医院/防疫站都能提供IPV，你只能在<strong>朝阳区</strong>的十来家试点医院/防疫站找到IPV，另外北京的一些涉外医院也有些。而在整个北京市，估计只有几千人份的IPV疫苗（所以绝大多数的孩子都是服用糖丸）。这有限的IPV疫苗，都是进口疫苗，来自法国赛诺菲巴斯德（sanofi pasteur）公司，品牌叫做“爱宝维”(IMOVAX Polio(TM))增强型脊髓灰质炎灭活疫苗。我来讲讲这个故事。</p>
<p>爱宝维1982年在法国批准上市，1990年在美国批准上市，2009年9月在中国批准上市。为什么国内批准上市了还不让大规模销售而只在朝阳试点呢？批准上市了，就表明该产品在安全性等方面得到了国家相关部门的许可，在北京只能在朝阳试点，这更多是一个政治考虑而不是医学考虑。廉价优质的糖丸是国家根除小儿麻痹症的功臣，要是更多的父母知道糖丸的潜在危险而犹豫不让孩子服用，又因为IPV的价格而负担不起，整个国家的免疫计划就要受到影响。</p>
<p>中国疾病预防控制中心跟深圳赛诺菲巴斯德生物制品有限公司有个项目叫做“在中国选定地区脊髓灰质炎灭活疫苗（爱宝维）的上市后完全性研究”，北京朝阳区就是这个项目的选定地区之一。这个项目的概况你可以在下面的网站看到（英文）：</p>
<p><a href="http://clinicaltrials.gov/ct2/show/NCT01278433" class="uri">http://clinicaltrials.gov/ct2/show/NCT01278433</a></p>
<p>所以，在北京要打IPV（爱宝维），可以去朝阳区的各个医院/防疫站问问。一些涉外医院也可能有，我没有调查，唯一知道的就是北京SOS也有。文末我会提供朝阳区二十来家医院/防疫站的地址和电话（可能不全），看着方便程度，打电话问了。我家小孩是在中日友好医院的保健科打的，保健科也就是那个片区的社区防疫站，类似于北京大学木器厂，跟其他的木器厂区别不大（但是北京大学的木器厂啊，嘻嘻）。</p>
</section>
<section id="参考资料" class="level2">
<h2 class="anchored" data-anchor-id="参考资料">8.参考资料</h2>
<p>&nbsp;</p>
<p><strong>1). Polio vaccine</strong><br>
<a href="http://en.wikipedia.org/wiki/Polio_vaccine" class="uri">http://en.wikipedia.org/wiki/Polio_vaccine</a></p>
<p><a href="http://www.who.int/mediacentre/factsheets/fs114/en/index.html" class="uri">http://www.who.int/mediacentre/factsheets/fs114/en/index.html</a></p>
<p>关于脊髓灰质炎以及OPV和IPV的一般介绍。</p>
<p><strong>2).什么是疫苗衍生的脊髓灰质炎病毒?</strong><br>
<a href="http://www.who.int/features/qa/64/zh/index.html" class="uri">http://www.who.int/features/qa/64/zh/index.html</a></p>
<p>英文版：<a href="http://www.who.int/features/qa/64/en/index.html" class="uri">http://www.who.int/features/qa/64/en/index.html</a></p>
<p>WHO关于VDPV的说明，中英文两种语文。</p>
<p>另见：</p>
<p><a href="http://www.polioeradication.org/Polioandprevention/Thevirus/Vaccinederivedpolioviruses.aspx" class="uri">http://www.polioeradication.org/Polioandprevention/Thevirus/Vaccinederivedpolioviruses.aspx</a></p>
<p>3). <strong><em>An Outbreak of Poliomyelitis Caused by Type 1 Vaccine-Derived Poliovirus in China</em></strong> J Infect Dis. (2006) 194 (5): 545-551.doi: 10.1086/506359<br>
Reprints or correspondence: Dr.&nbsp;Yu Jingjin, Deputy Director General, Dept. of Disease Control, Ministry of Health, 1 Xizhimenwai South Rd., Beijing, People’s Republic of China 100044 (<a href="mailto:yujj@mohmail.cn" class="email">yujj@mohmail.cn</a>)</p>
<p>关于贵州2004年VDPV爆发的英文论文，通讯作者是国家疾控中心的官员。</p>
<p><strong>4). WHO关于脊髓灰质炎根除计划的规划建议</strong></p>
<p><a href="http://www.polioeradication.org/Portals/0/Document/StrategicPlan/StratPlan2010_2012_ENG.pdf">http://www.polioeradication.org/Portals/0/Document/StrategicPlan/StratPlan2010_2012_ENG.pdf</a></p>
<p>中文缩写版：</p>
<p><a href="http://www.polioeradication.org/Portals/0/Document/StrategicPlan/StratPlan2010_2012_CHI_ExSum.pdf">http://www.polioeradication.org/Portals/0/Document/StrategicPlan/StratPlan2010_2012_CHI_ExSum.pdf</a></p>
<p>又见，</p>
<p><a href="https://apps.who.int/vaccines-access/quality/vmc/opvipvmting/Policyoptions.pdf" class="uri">https://apps.who.int/vaccines-access/quality/vmc/opvipvmting/Policyoptions.pdf</a></p>
</section>
<section id="北京朝阳可能有ipv的医院防疫站及其联系方式" class="level2">
<h2 class="anchored" data-anchor-id="北京朝阳可能有ipv的医院防疫站及其联系方式">9. 北京朝阳（可能有IPV的）医院/防疫站及其联系方式</h2>
<p>1).卫生部中日友好医院&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区樱花园东街&nbsp;&nbsp;&nbsp; 010-64222973/84205001</p>
<p>2).朝阳区高碑店社区卫生服务中心&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区高碑店村250号&nbsp;&nbsp;&nbsp; 010-85758645</p>
<p>3).朝阳区将台社区卫生服务中心&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区酒仙桥路49号&nbsp;&nbsp;&nbsp; 010-64373140</p>
<p>4).朝阳区金盏社区卫生服务中心&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区楼梓庄中心街104号&nbsp;&nbsp;&nbsp; 010-84312118</p>
<p>5).朝阳区劲松社区卫生服务中心&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区劲松5区501楼&nbsp;&nbsp;&nbsp; 010-67782556</p>
<p>6).朝阳区金盏第二社区卫生服务中心&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区金盏大街2号&nbsp;&nbsp;&nbsp; 010-84333273</p>
<p>7).朝阳区三里屯社区卫生服务中心&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区北三里屯&nbsp;&nbsp;&nbsp; 010-64165682</p>
<p>8).朝阳区十八里店社区卫生服务中心&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区十八里店乡周家庄村329号&nbsp;&nbsp;&nbsp; 010-67473380</p>
<p>9).朝阳区双桥医院&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区双桥东路双桥医院&nbsp;&nbsp;&nbsp; 010-85391039</p>
<p>10).朝阳区团结湖社区卫生服务中心&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区团结湖北三条7号楼&nbsp;&nbsp;&nbsp; 010-85970998</p>
<p>11).朝阳区安贞社区卫生服务中心&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区安华西里2区11号楼&nbsp;&nbsp;&nbsp; 010-64248352</p>
<p>12).朝阳区崔各庄社区卫生服务中心&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区来广营东路马南里&nbsp;&nbsp;&nbsp; 010-84702051，84702507</p>
<p>13).朝阳区平房社区卫生服务中心&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区姚家园西里1号院1号楼&nbsp;&nbsp;&nbsp; 010-85573735</p>
<p>14).朝阳区豆各庄社区卫生服务中心&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区豆各庄乡豆各庄村&nbsp;&nbsp;&nbsp; 010-87391243</p>
<p>15).朝阳区左家庄社区卫生服务中心&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区顺源街1号&nbsp;&nbsp;&nbsp; 010-64672412</p>
<p>16).朝阳区潘家园社区卫生服务中心&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区潘家园华威里25号&nbsp;&nbsp;&nbsp; 010-87789890</p>
<p>17).朝阳区管庄第二社区卫生服务中心&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区杨闸环岛东瑞祥里小区17号楼&nbsp;&nbsp;&nbsp; 010-85709793-8126</p>
<p>18).朝阳区八里庄第二社区卫生服务中心&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区八里庄东里1号&nbsp;&nbsp;&nbsp; 010-65573886</p>
<p>19).朝阳区奥运村社区卫生服务中心&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区北沙滩6号院3号楼&nbsp;&nbsp;&nbsp; 010-64845518</p>
<p>20).朝阳区呼家楼社区卫生服务中心&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区金台路13#内2#西楼5层&nbsp;&nbsp;&nbsp; 010-85991801</p>
<p>21).朝阳区惠兰医院&nbsp;&nbsp;&nbsp;<br>
北京市朝阳区望京北路18号&nbsp;&nbsp;&nbsp; 010-64390831,010-64390832</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>