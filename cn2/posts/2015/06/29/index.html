<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="jiang">
<meta name="dcterms.date" content="2015-06-29">

<title>丽·江行 - 当好人遭殃</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../">
<script src="../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../../index.html">
    <span class="navbar-title">丽·江行</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Jiangtang" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/JiangtangHu" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">当好人遭殃</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">读书</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>jiang </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">June 29, 2015</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p><img style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border-width: 0px;" src="https://upload.wikimedia.org/wikipedia/en/9/95/When_Bad_Things_Happen_To_Good_People.jpg" alt="" border="0"></p>
<p>犹太拉比库希纳（<a href="https://en.wikipedia.org/wiki/Harold_Kushner">Harold Kushner</a>）的孩子亚伦（Aaron），出生8个月后体重停止增加，一岁时就开始掉头发，三岁时确诊为快速衰老（rapid aging），十来岁时过世。库希纳说这不公平，他自认为自己是个好人，尽力追寻上帝的启示，比起大多数拥有健康家庭的人，他过着更为严谨的宗教生活；如果全知全能全善的上帝存在，上帝怎么能够这么对待他？</p>
<p align="left">
作为一名拉比，库希纳也接受了他牧区教友无数次类似的无辜者苦难的咨询，后来他写了一本书，《当好人遭殃》（<a href="https://en.wikipedia.org/wiki/When_Bad_Things_Happen_to_Good_People"><em>When Bad Things Happen To Good People</em></a>，1978)，探讨好人受苦这一严肃的问题；如果你熟悉《<a href="https://zh.wikipedia.org/zh-cn/%E7%B4%84%E4%BC%AF%E8%A8%98">旧约·约伯记</a>》，你就能很快进入这个问题的情境。作为一个无神论者，我对这个问题有自己的看法，但是我非常好奇这个问题在宗教语境下如何解答。库希纳首先拒绝了以下提到的六种通常的解释，我先来简单转述下（这书是借图书馆的，这里权当做个读书笔记）:
</p>
<p align="left">
<strong>1.</strong> 有种解释认为你受苦是对你的“罪”的一种惩罚。《旧约·箴言篇》（12：21）有一句，“义人不遭灾害，恶人满受祸患”。上帝是正义的，你受苦是你罪有应得。
</p>
<p align="left">
库希纳认为这种解释有很大的局限：人都是不完美的，如果孩子早夭是因为自己有一次比如跟邻居有口角，或者有一次没有虔诚祈祷，那么这个解释让人们恨自己，甚至也恨上帝；而且，这个解释甚至有时也跟事实不符。
</p>
<p align="left">
<strong>2.</strong> 这种解释认为“不是不报，时机未到”，可能暂时会存在好人遭殃的情况，但是从长远看，上帝的计划是正义的。《旧约·诗篇》（92：7-8，14-15）有几句说：
</p>
<blockquote class="blockquote">
<p align="left">
恶人茂盛如草，
</p>
<p align="left">
一切作孽之人发旺的时候，
</p>
<p align="left">
正是他们要灭亡。。。
</p>
<p align="left">
。。
</p>
<p align="left">
（义人）他们年老的时候仍要结果子，
</p>
<p align="left">
要满了汁浆而长发青，
</p>
<p align="left">
好显明耶和华神正直的。
</p>
</blockquote>
<p align="left">
库希纳认为这种解释有一定洞见，但是他忍不住反问，有些人在正义未彰时就死去，有些人在长久的忍耐等待中已经耗光了青春还有对生活的渴望，背后安排这一切的上帝，为什么不早些让正义得胜呢？
</p>
<p align="left">
<strong>3.</strong> 还有种解释说上帝自有他自己的理由让好人遭殃，而人类没法评判和质疑他的理由。
</p>
<p align="left">
库希纳认为这种解释也不好，它会让受苦的人感到孤立无助以及疑惑。
</p>
<p align="left">
<strong>4.</strong> 一种说法是苦难有某种“教育”功能。比如作为父母，你拿走小孩的糖果，这看起来不公平，但还是为了孩子的好。类似的，上帝就像父母，他有时候惩罚人类，就跟父母惩罚小孩一样，都是因为爱。
</p>
<p align="left">
库希纳认为这种说法把坏说成好，把受难说成优待，纯粹是为上帝辩解，而不是为了帮助和安慰受苦的人。举个在街边被车撞到小孩的例子，如果这是一个“教训”，那么当这个教训结束时，小孩已经停止呼吸了：为了这个微乎其微的教训，这个代价也太惨重了。
</p>
<p align="left">
<strong>5.</strong> 这种说法认为苦难是一种“测试”，就像亚伯拉罕得到上帝的指令，要他把孩子以撒带过去献祭。亚伯拉罕通过了这个测试，从而受到上帝的祝福。上帝为什么单单选中亚伯拉罕参加这个测试？因为上帝相信他是最坚强的，就像集市上卖瓦罐的，他会挑一个最结实的罐子敲敲打打，来向客户展示。
</p>
<p align="left">
作为无辜受苦的人本身，库希纳认为自己被挑中并不是一个荣幸，而且他如果更“脆弱”些，是不是就不会有这苦难？
</p>
<p align="left">
<strong>6.</strong> 最后一种说法，比如死亡这种苦难，让人超脱于这个苦难的世界，而与上帝生活在一个美好的世界。
</p>
<p align="left">
这个说法在电视电影里很常见。但对一个遭受丧子之痛的人来说（包括作者本人），这个说法很伤人：难道一个无辜的小孩过世，作为父母的还要欢呼这是上帝的荣光？
</p>
<p align="left">
————————————————————
</p>
<p align="left">
以上是本书导言和第一章的内容:
</p>
<blockquote class="blockquote">
<p align="left">
Introduction: <em>Why I Wrote This Book</em>
</p>
<p align="left">
Ch 1: <em>Why Do the Righteous Suffer</em>?
</p>
</blockquote>
<p align="left">
接下来就是库希纳本人对这个问题的解答（他仍然不失信仰）。他的一些解释对无神论者来说，可能都是很“平凡”的，但是再一次，我们看看这个问题在宗教背景下的一个解释。
</p>
<section id="ch-2-the-story-of-a-man-named-job" class="level2">
<h2 class="anchored" data-anchor-id="ch-2-the-story-of-a-man-named-job">Ch 2: <em>The Story of a Man Named Job</em></h2>
<p align="left">
第二章 拿《<a href="https://zh.wikipedia.org/zh-cn/%E7%B4%84%E4%BC%AF%E8%A8%98">约伯记</a>》做例子。约伯是个好人，然后（在上帝的默许下）他遭受了人所能遭受的一切苦难，他的财物被掠夺，他的儿女遭受罹难，他本人也染上恶疾，然后他就呼喊：为什么是我？
</p>
<p align="left">
库希纳对《<a href="https://zh.wikipedia.org/zh-cn/%E7%B4%84%E4%BC%AF%E8%A8%98">约伯记</a>》的解读，主要意见是上帝是善良的，但并不是全能的，即使是他，愿意这个世界处在和平之中，不愿意好人遭殃，但他也不能够将邪恶和厄运铲除。好人遭殃，并不是因为他们没有足够好或者自作自受/罪有应得，更不是来自上帝的惩罚。
</p>
<p align="left">
又，作者的解释或许有个漏洞，他说上帝可以不是全能的，其实在故事里，亚伯的受难是他造成的，或者说，撒旦是得到他的许可的。
</p>
<p align="left">
——————————————-
</p>
<p align="left">
当我哼哧哼哧写到这里的时候，在网上找到一篇对本书各章更好的摘要，我就懒得写了。那作者看着有宗教背景，对本书有着比我更多的“理解的同情”，所以就贴他的了（还有个原因就是那文章是放在“博客中国”平台，感觉它迟早要down掉。。）。总结下，这是本值得阅读的好书，我是通过哈佛大学法学教授<a href="http://li-and-jiang.com/blog/2012/07/08/life-reading/">Alan Dershowitz</a>的一本书里知道这本书的。
</p>
<p align="left">
——————————————-
</p>
<h2 align="center" class="anchored">
一位犹太教拉比对苦难问题的看法 (by 陈永涛)
</h2>
<p align="center">
<a title="http://chenyongtao.blogchina.com/934578.html" href="http://chenyongtao.blogchina.com/934578.html">http://chenyongtao.blogchina.com/934578.html</a>
</p>
<p>库施乐是当代一位犹太教拉比。他的主要观点就是，苦难或有其他原因，人未必明白。也就是说苦难在某种程度上有奥秘的含义。他在他的著作《当好人受苦时》（<em>When Bad Things Happen To Good</em> _People__，_1981)论述了这一观点。从他儿子得绝症十年的受苦经验中，他深感无辜者受苦的问题。他不能接受一切苦难都是罪的刑罚的说法。他认为上帝的能力受了限制，他的仁慈却是无限的。苦难究竟不是上帝带来的，上帝也没有控制这些苦难的事。但是苦难并不使人放弃信仰，不要问上帝为什么有苦难，却要求上帝指示怎样应付苦难。</p>
<p>他的主要的观点是：</p>
<p><strong><em>第一，上帝并不愿意让坏事发生在好人身上：</em></strong>当坏事发生在好人身上时，上帝应该对此负责吗？当然不是。藉着分析约伯的故事，Kushner 暗示上帝是善的但却不是权能的。坏事发生在好人身上，不是上帝的意愿。无辜的人常常受苦。他们所受的绝不是他们应受的。因此，当坏事发生在他们身上时，不是因为他们做了什么错事，以致上帝刑罚他们。他们的不幸不是来自于上帝。因着这种认识，我们会转向上帝，从上帝那里寻求帮助，而不是向上帝发怒，认为上帝对我们不公。</p>
<p><strong><em>第二，有时受苦是没有理由的。</em></strong>因为上帝并没有使坏事发生在好人身上，那么苦难是从哪里来的呢？对他来说，有些苦难是没有理由的。它们的发生是很随意的。随意是无序的代名词。无序就是恶。这样可以避免人因为苦难不再相信上帝的善。在他看来，有些事情的发生是没有理由的，它们还将继续与我们相伴。因此，我们得学习与无序相处，要认识到有些事，诸如地震和事故不是上帝的旨意。</p>
<p><strong><em>第三，好人也不例外。</em></strong>我们喜欢相信，上帝将不顾自然律，去支持和保护他所爱的人。但事实是自然律并不改变。为什么？因为上帝已经给我们一个美妙的、精确的、有序的世界。当然，自然律的不改变的特征也带来问题，甚至危险。这意味着我们得生活在它所促成的危险中。自然律待每一个人都是一样的。对好人或有用的人也并不例外。上帝并没有打断自然律的工作，去保护义人免受伤害。坏事发生在好人身上，既不是出于上帝，上帝也不能阻止。许多坏事仅仅是自然律引起的。自然律在道德上是盲目的，是没有价值感的。许多灾难都是自然的行为，并且那些受苦者并没有道德的罪恶。痛苦是我们生存所付出的代价。</p>
<p><strong><em>第四，上帝给我们留下空间，让我们去成为人。</em></strong>在他的理解中，上帝最后按他的形象也是按动物和兽的形象创造人。因此，人在身体上像兽，在灵性上像上帝。人是这样的被造物：既有动物性，又有神性。成为人就是远离人的动物性。但是，人的本能常常使我们成为人的行动非常困难。为了让我们成为自由和成为人，上帝得让我们自由去选择做对的事还是做错的事。因此，尽管上帝与受苦者在一起，而不是与谋杀者在一起，但他并不控制人在善恶之间的选择。受苦者的眼泪和祷告引起上帝的同情，但因他给人自由去选择，因此上帝不能做任何事去避免苦难。</p>
<p><strong><em>第五，上帝帮助那些停止伤害自己的人。</em></strong>当人在痛苦中的时候，人往往很容易一再伤害自己。我们并不觉得我们值得接受别人的帮助，所以我们让罪疚，愤怒，嫉妒和自我孤立使坏的情形变得更糟。我们很容易认为临到我们身上的坏事是我们罪有应得。这是最为错误的事。尽管有时负罪感是合适的和必须的，但是当我们在我们的苦难中一再伤害自己，那就是极为错误的。它是一个更糟的事情，就如往伤口里撒盐。我们应该知道，并不是世界上所发生的每一件事都是与我们的行为有关。我们应该知道我们是好人，我们应该过得更好。我们也应该知道，上帝仅仅帮助那些停止伤害他们自己的人。</p>
<p><strong><em>第六，上帝不会做每一件事，但他会做某些重要的事。</em></strong>为什么人不能得到我们祷告祈求的东西，为什么上帝让坏事发生在好人身上？关于此，有许多不同的回答。但对Kushner来说，唯一的原因是，上帝不会做每一件事，他仅仅做某些重要的事。在他看来，祷告并不是要让上帝去改变某些不能改变的事，去让上帝为我们做我们的工作。祷告首先所要做的，就是把我们放在与其他人的关联中，去把人从孤立中救赎出来。祷告也把我们放在与上帝的关系中。但是，它只是寻求上帝的帮助。我们不能“贿赂”上帝，也不能驱赶上帝做某些他不能为我们做的事。但是我们能祷告祈求上帝与我们同在，帮助我们。因此，我们仅仅需要转向他。或许上帝并不给我们神迹，但他的确让我们知道，当我们受苦时我们一点也不孤单。或许我们并没有得到神迹去避免悲剧，但我们会发现人们在我们周围，上帝在我们旁边，赐我们力量，帮助我们去战胜悲剧。这对我们来说是更重要的。</p>
<p><strong><em>第七，宗教的善使我们的生活更有意义，更积极和更有责任感。</em></strong>苦难并不能否定宗教的善。宗教的善使我们在受到伤害后继续相信上帝，相信世界。宗教的善也让我们放眼未来，而不是只盯着过去。只有宗教能肯定受苦者的自我价值感，让我们对苦难作出正确的回应。坏事的本事没有意义，但我们能给它们意义。藉着这样做，我们能赋予悲剧以意义。我们的苦难应服侍上帝，而不是恶者。因着我们“正确”的回应，我们能使我们所爱的和失去的人成为上帝的“殉道士”，而不是魔鬼的‘殉道士’。在他们死后，我们能为他们做的最后的事情就是让他们为上帝为生命作出见证。生活是不公正的，但生活的不公正并不必然让我们否认对上帝的信仰。对我们来说，爱是更重要的。在世界上寻求爱，而不是寻求公正和正义，将使我们选择去不断创造新的生活。苦难不能阻止我们爱上帝。爱是赦免。爱会帮助我们赦免世界，尽管世界是不完全的。爱也帮助我们不再抱怨上帝没有造一个更美好的世界。赦免的能力或爱的能力是上帝给我们的武器，使我们能更完全，更勇敢，更有意义地活在这个很不完全的世界上。</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>