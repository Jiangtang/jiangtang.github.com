<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Macro Quoting on Jiangtang Hu | 胡江堂</title>
    <link>/tags/macro-quoting/index.xml</link>
    <description>Recent content in Macro Quoting on Jiangtang Hu | 胡江堂</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <atom:link href="/tags/macro-quoting/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Macro Quoting in SAS Data Integration Studio</title>
      <link>/2012/11/19/macro-quoting-in-sas-data-integration-studio/</link>
      <pubDate>Mon, 19 Nov 2012 21:35:04 +0000</pubDate>
      
      <guid>/2012/11/19/macro-quoting-in-sas-data-integration-studio/</guid>
      <description>

&lt;p&gt;&lt;font size=&#34;1&#34;&gt;You can run the following piece of codes successfully in these 3 SAS programming environments:&lt;/font&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;font size=&#34;1&#34;&gt;BASE SAS &lt;/font&gt;&lt;/li&gt;
&lt;li&gt;&lt;font size=&#34;1&#34;&gt;Enterprise Guide: create a new “File-New-Program” &lt;/font&gt;&lt;/li&gt;
&lt;li&gt;&lt;font size=&#34;1&#34;&gt;SAS Data Integration Studio: create a new “Tool-Code Editor” &lt;/font&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;font size=&#34;1&#34; face=&#34;Courier New&#34;&gt;%let species=&amp;ldquo;Setosa&amp;rdquo; &amp;ldquo;Versicolor&amp;rdquo;;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font size=&#34;1&#34;&gt;&lt;font face=&#34;Courier New&#34;&gt;data a; &lt;br /&gt;&amp;#160;&amp;#160;&amp;#160; set sashelp.iris; &lt;br /&gt;&amp;#160;&amp;#160;&amp;#160; where species in (&amp;amp;species); &lt;br /&gt;run;&lt;/font&gt; &lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font size=&#34;1&#34; face=&#34;Courier New&#34;&gt;&lt;/font&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;font size=&#34;1&#34;&gt;Then create a &lt;font color=&#34;#00ff00&#34;&gt;Transformation&lt;/font&gt; in SAS Data Integration Studio (DIS for short; I use version 4.3 in a Win 7 machine) using the codes above as source code (remember deleting first line) and create a simple &lt;font color=&#34;#00ff00&#34;&gt;Prompt&lt;/font&gt; to assign the macro variable &amp;amp;species with default values as &lt;em&gt;&amp;ldquo;Setosa&amp;rdquo; &amp;ldquo;Versicolor&amp;rdquo;&lt;/em&gt;:&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.jiangtanghu.com/blog/wp-content/uploads/2012/11/SAS_DIS_Transformation.png&#34;&gt;&lt;img style=&#34;background-image: none; border-right-width: 0px; margin: 3px auto 5px; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px&#34; title=&#34;SAS_DIS_Transformation&#34; border=&#34;0&#34; alt=&#34;SAS_DIS_Transformation&#34; src=&#34;http://www.jiangtanghu.com/blog/wp-content/uploads/2012/11/SAS_DIS_Transformation_thumb.png&#34; width=&#34;519&#34; height=&#34;475&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font size=&#34;1&#34;&gt;Drag this &lt;font color=&#34;#00ff00&#34;&gt;Transformation&lt;/font&gt; in a single node &lt;font color=&#34;#00ff00&#34;&gt;job&lt;/font&gt; and run, then you will get such errors:&lt;/font&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;font face=&#34;Courier New&#34;&gt;127&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160; data a; &lt;br /&gt;128&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160; set sashelp.iris; &lt;br /&gt;129&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160; where species in (&amp;amp;species); &lt;br /&gt;&lt;font color=&#34;#ff0000&#34;&gt;NOTE: Line generated by the macro variable &amp;ldquo;SPECIES&amp;rdquo;. &lt;br /&gt;129&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160; &amp;ldquo;Setosa&amp;rdquo;, &amp;ldquo;Versicolor&amp;rdquo;&lt;/font&gt; &lt;br /&gt;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160; _ &lt;br /&gt;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160; 22 &lt;br /&gt;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160; _ &lt;br /&gt;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160; 76 &lt;br /&gt;&lt;font color=&#34;#ff0000&#34;&gt;ERROR&lt;/font&gt;: Syntax error while parsing WHERE clause. &lt;br /&gt;&lt;font color=&#34;#ff0000&#34;&gt;ERROR&lt;/font&gt; 22-322: Syntax error, expecting one of the following: a quoted string, a numeric constant, a datetime constant, &lt;br /&gt;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160; a missing value, -.&amp;#160; &lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font face=&#34;Courier New&#34;&gt;&lt;font color=&#34;#ff0000&#34;&gt;ERROR&lt;/font&gt; 76-322: Syntax error, statement will be ignored.&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font face=&#34;Courier New&#34;&gt;130&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160; run;&lt;/font&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;font size=&#34;1&#34;&gt;So, what happened inside DIS since such codes go well in BASE SAS, SAS EG and the Code Editor in DIS itself? The default value &lt;em&gt;&amp;ldquo;Setosa&amp;rdquo; &amp;ldquo;Versicolor&amp;rdquo;&lt;/em&gt; was assigned to macro variable &amp;amp;species in the DIS &lt;font color=&#34;#00ff00&#34;&gt;Prompt&lt;/font&gt; (see picture above) and you would expect the following effect like what I wrote in open codes in BASE SAS:&lt;/font&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;font size=&#34;1&#34; face=&#34;Courier New&#34;&gt;%let species=&amp;ldquo;Setosa&amp;rdquo; &amp;ldquo;Versicolor&amp;rdquo;;&lt;/font&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;font size=&#34;1&#34;&gt;Actually NO. In DIS, this action was translated into such clause:&lt;/font&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;font face=&#34;Courier New&#34;&gt;%let species = &lt;font color=&#34;#ff0000&#34;&gt;%nrquote&lt;/font&gt;(%&amp;ldquo;Setosa%&amp;rdquo;, %&amp;ldquo;Versicolor%&amp;rdquo;);&lt;/font&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;font size=&#34;1&#34;&gt;Here is the point: since there quotation symbols were masked by &lt;font color=&#34;#ff0000&#34;&gt;&lt;a href=&#34;http://support.sas.com/documentation/cdl/en/mcrolref/62978/HTML/default/viewer.htm#p0ejcenxk89b36n1xgxyf922ugoa.htm&#34; target=&#34;_blank&#34;&gt;&lt;font color=&#34;#00ff00&#34;&gt;%nrquote&lt;/font&gt;&lt;/a&gt; &lt;/font&gt;function, they are no longer valid syntax characters (then we got errors!). &lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font size=&#34;1&#34;&gt;The solution: use a &lt;/font&gt;&lt;a href=&#34;http://support.sas.com/documentation/cdl/en/mcrolref/62978/HTML/default/viewer.htm#p1k3cotqhvgwk0n105gyfe1cqg9m.htm&#34; target=&#34;_blank&#34;&gt;&lt;font size=&#34;1&#34;&gt;%&lt;font color=&#34;#00ff00&#34;&gt;unquote&lt;/font&gt;&lt;/font&gt;&lt;/a&gt; &lt;font size=&#34;1&#34;&gt;function on the macro variable &amp;amp;species to reverse the masking effort by &lt;font color=&#34;#ff0000&#34;&gt;&lt;a href=&#34;http://support.sas.com/documentation/cdl/en/mcrolref/62978/HTML/default/viewer.htm#p0ejcenxk89b36n1xgxyf922ugoa.htm&#34; target=&#34;_blank&#34;&gt;&lt;font color=&#34;#00ff00&#34;&gt;%nrquote&lt;/font&gt;&lt;/a&gt;&lt;/font&gt;&lt;font color=&#34;#cccccc&#34;&gt;(note in our open codes example in BASE SAS, both functions were not used):&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;font size=&#34;1&#34;&gt;&lt;font face=&#34;Courier New&#34;&gt;data a; &lt;br /&gt;&amp;#160;&amp;#160;&amp;#160; set sashelp.iris; &lt;br /&gt;&amp;#160;&amp;#160;&amp;#160; where species in (&lt;font color=&#34;#ff0000&#34;&gt;%unquote&lt;/font&gt;(&amp;amp;species)); &lt;br /&gt;run;&lt;/font&gt; &lt;/font&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&#34;font-size-1-font-size-1-font-font&#34;&gt;&lt;font size=&#34;1&#34;&gt;&lt;font size=&#34;1&#34;&gt;&lt;/font&gt;&lt;/font&gt;&lt;/h1&gt;

&lt;p&gt;&lt;font style=&#34;font-weight: bold&#34;&gt;Notes on Macro Variable Generated by DIS&lt;/font&gt;&lt;/h1&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;font face=&#34;Courier New&#34;&gt;%let species = &lt;font color=&#34;#ff0000&#34;&gt;%nrquote&lt;/font&gt;(%&amp;ldquo;Setosa%&amp;rdquo;, %&amp;ldquo;Versicolor%&amp;rdquo;);&lt;/font&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;font size=&#34;1&#34;&gt;1)&lt;font color=&#34;#ff0000&#34;&gt;&lt;a href=&#34;http://support.sas.com/documentation/cdl/en/mcrolref/62978/HTML/default/viewer.htm#p0ejcenxk89b36n1xgxyf922ugoa.htm&#34; target=&#34;_blank&#34;&gt;&lt;font color=&#34;#00ff00&#34;&gt;%nrquote&lt;/font&gt;&lt;/a&gt; &lt;/font&gt;function used while it is dated for a long time… &lt;font color=&#34;#ff0000&#34;&gt;&lt;a href=&#34;http://support.sas.com/documentation/cdl/en/mcrolref/62978/HTML/default/viewer.htm#p0ejcenxk89b36n1xgxyf922ugoa.htm&#34; target=&#34;_blank&#34;&gt;&lt;font color=&#34;#00ff00&#34;&gt;%nrquote&lt;/font&gt;&lt;/a&gt; &lt;/font&gt;and &lt;/font&gt;&lt;a href=&#34;http://support.sas.com/documentation/cdl/en/mcrolref/62978/HTML/default/viewer.htm#p1780jrqrtwtw7n16x83peo2zpxr.htm&#34; target=&#34;_blank&#34;&gt;&lt;font color=&#34;#00ff00&#34; size=&#34;1&#34;&gt;%quote&lt;/font&gt;&lt;/a&gt; &lt;font size=&#34;1&#34;&gt;were replaced by &lt;/font&gt;&lt;a href=&#34;http://support.sas.com/documentation/cdl/en/mcrolref/62978/HTML/default/viewer.htm#p06cx7fegzmzpen1m9991yljxiav.htm&#34; target=&#34;_blank&#34;&gt;&lt;font size=&#34;1&#34;&gt;&lt;font color=&#34;#00ff00&#34;&gt;%BQUOTE&lt;/font&gt; and &lt;font color=&#34;#00ff00&#34;&gt;%NRBQUOTE&lt;/font&gt; Functions&lt;/font&gt;&lt;/a&gt;&lt;font size=&#34;1&#34;&gt;.&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font size=&#34;1&#34;&gt;2)All quotation symbols(“) were preceded by a percent sign (%). That’s &lt;font size=&#34;1&#34;&gt;&lt;font color=&#34;#ff0000&#34;&gt;&lt;a href=&#34;http://support.sas.com/documentation/cdl/en/mcrolref/62978/HTML/default/viewer.htm#p0ejcenxk89b36n1xgxyf922ugoa.htm&#34; target=&#34;_blank&#34;&gt;&lt;font color=&#34;#00ff00&#34;&gt;%nrquote&lt;/font&gt;&lt;/a&gt; &lt;/font&gt;and &lt;/font&gt;&lt;a href=&#34;http://support.sas.com/documentation/cdl/en/mcrolref/62978/HTML/default/viewer.htm#p1780jrqrtwtw7n16x83peo2zpxr.htm&#34; target=&#34;_blank&#34;&gt;&lt;font color=&#34;#00ff00&#34; size=&#34;1&#34;&gt;%quote&lt;/font&gt;&lt;/a&gt;&lt;font size=&#34;1&#34;&gt; needed and why they are outdated any more.&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>